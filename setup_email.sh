#!/bin/bash

# SPECTER Legal Assistant - Email Configuration Setup Script
# This script helps you configure email settings for OTP functionality

echo "üõ†Ô∏è  SPECTER Legal Assistant - Email Configuration Setup"
echo "======================================================"

# Check if .env file exists in backend directory
if [ ! -f "backend/.env" ]; then
    echo "üìÑ Creating .env file from template..."
    cp backend/.env.example backend/.env
    echo "‚úÖ .env file created successfully!"
fi

echo ""
echo "üìß To enable OTP email sending, you need to configure Gmail SMTP:"
echo ""

echo "1Ô∏è‚É£  Enable 2-Factor Authentication:"
echo "   ‚Ä¢ Go to: https://myaccount.google.com/security"
echo "   ‚Ä¢ Enable '2-Step Verification'"

echo ""
echo "2Ô∏è‚É£  Generate App Password:"
echo "   ‚Ä¢ Go to: https://myaccount.google.com/apppasswords"
echo "   ‚Ä¢ Select 'Mail' and your device"
echo "   ‚Ä¢ Copy the 16-character password generated"

echo ""
echo "3Ô∏è‚É£  Update backend/.env file:"
echo "   ‚Ä¢ Open backend/.env"
echo "   ‚Ä¢ Replace 'your-gmail@gmail.com' with your Gmail address"
echo "   ‚Ä¢ Replace 'your-16-char-app-password' with the generated app password"

echo ""
echo "üìã Current .env email configuration:"
grep -E "(LAWYER_SMTP_USER|LAWYER_SMTP_PASS)" backend/.env || echo "   Email configuration not found in .env file"

echo ""
echo "üöÄ After configuration:"
echo "   ‚Ä¢ Restart the backend server"
echo "   ‚Ä¢ Registration and password reset will send actual emails"
echo "   ‚Ä¢ Users will receive OTP codes via email"

echo ""
echo "üîß For Development (no email setup needed):"
echo "   ‚Ä¢ OTP codes are displayed in server console"
echo "   ‚Ä¢ Use the development OTP endpoint: /auth/dev/get-otp/{email}"
echo "   ‚Ä¢ Perfect for testing without email configuration"

echo ""
echo "‚ú® Setup complete! Your SPECTER Legal Assistant is ready."
